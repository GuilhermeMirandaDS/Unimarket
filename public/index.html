<!DOCTYPE html>
<html>
<head><title>Login</title></head>
<body>
    <div class="container">
        <div class="slogan">
            <div class="titulo">
                <h1>Faça login para navegar pelo</h1>
                <h1 class="unimarket">Unimarket</h1>
            </div>
            <div class="subtext">
                <p>Não possui uma conta?</p>
                <a class="signin-link" href="#">Registre-se aqui.</a>
            </div>
        </div>
        <div class="login-form">
          <div class="trocar-aba">
            <button class="aba-login active">Login</button>
            <button class="aba-cadastro">Cadatre-se</button>
          </div>
            <form class="signin" id="registerForm">
              <div class="form-input">
                <p>RA</p>
                <input name="username" placeholder="Digite seu RA" required>
              </div>
              <div class="form-input">
                <p>Senha</p>
                <input name="password" placeholder="Digite sua Senha" type="password" required>
              </div>
              <button type="submit">Cadastrar-se</button>
            </form>
          
            <form class="login" id="loginForm">
              <div class="form-input">
                <p>RA</p>
                <input name="username" placeholder="Digite seu RA" required>
              </div>
              <div class="form-input">
                <p>Senha</p>
                <input name="password" placeholder="Digite sua Senha" type="password" required>
              </div>
              <button type="submit">Entrar</button>
            </form>
        </div>
    </div>

  <script>
    document.getElementById('registerForm').addEventListener('submit', async e => {
      e.preventDefault();
      const data = Object.fromEntries(new FormData(e.target));
      const res = await fetch('/api/register', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify(data)
      });
      const result = await res.json();
      alert(JSON.stringify(result));
    });

    document.getElementById('loginForm').addEventListener('submit', async e => {
      e.preventDefault();
      const data = Object.fromEntries(new FormData(e.target));
      const res = await fetch('/api/login', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify(data)
      });
      const result = await res.json();

      if (result.token) {
        alert(`Login bem-sucedido!\n\nToken JWT:\n${result.token}`);
        console.log("Token JWT:", result.token); // pra ver no console
      } else {
        alert(result.message || "Algo deu errado no login.");
      }

    });
    document.querySelector('.aba-login').addEventListener('click', () => {
      document.querySelector('.login').style.display = 'flex';
      document.querySelector('.signin').style.display = 'none';
      document.querySelector('.aba-login').classList.add('active');
      document.querySelector('.aba-cadastro').classList.remove('active');
    });
    document.querySelector('.aba-cadastro').addEventListener('click', () => {
      document.querySelector('.signin').style.display = 'flex';
      document.querySelector('.login').style.display = 'none';
      document.querySelector('.aba-cadastro').classList.add('active');
      document.querySelector('.aba-login').classList.remove('active');
    });
    document.querySelector('.signin-link').addEventListener('click', () => {
      document.querySelector('.signin').style.display = 'flex';
      document.querySelector('.login').style.display = 'none';
      document.querySelector('.aba-cadastro').classList.add('active');
      document.querySelector('.aba-login').classList.remove('active');
    });

    document.querySelector('.aba-login').click();
  </script>
</body>
</html>
<style>
    .active{
      border-bottom: solid 2px #0377FF !important;
    }
    *{
        font-family: 'Lexend', sans-serif;
    }
    body{
        display: flex;
        justify-content: space-around;
        margin-top: 15%;
    }
    .container{
        display: flex;
        justify-content: space-between;
        width: 1200px;
    }
    .login-form{
      display: flex;
      flex-direction: column;
      gap: 40px;
    }
    .trocar-aba{
      display: flex;
      justify-content: center;
      gap: 8rem;
    }
    .trocar-aba button{
      border: none;
      background-color: rgba(0, 0, 0, 0);
      color: #0377FF;
      font-weight: 700;
      font-family: 'Lexend', sans-serif;
      padding-bottom: 6px;
    }
    .trocar-aba button:hover{
      cursor: pointer;
      filter: brightness(90%);
      transition: ease-in-out 200ms;
    }
    .signin, .login{
        display: flex;
        flex-direction: column;
        justify-content: space-evenly;
        align-items: center;
        gap: 20px;
        width: 400px;
    }
    .signin button, .login button{
        width: 100%;
        border: none;
        padding: 0.7rem 2rem;
        font-weight: 600;
        box-shadow: 1px 1px 1px rgba(0, 0, 0, 0.1);
        background-color: #0377FF;
        color: white;
        border-radius: 4px;
        transition: ease-in-out 200ms;
    }
    .signin button:hover, .login button:hover{
      cursor: pointer;
      filter: brightness(90%);
      transition: ease-in-out 200ms;
    }
    .signin input, .login input{
        border: none;
        border-bottom: solid 1px rgb(189, 189, 189);
        padding: 0.5rem 0;
        width: 100%;
        outline: none;
    }
    .form-input{
      display: flex;
      flex-direction: column;
      width: 100%;
    }
    .form-input p{
      font-weight: 700;
      font-size: 20px;
    }
    h2{
        font-weight: 200;
    }


    .slogan{
        display: flex;
        flex-direction: column;
        justify-content: center;
        max-width: 600px;
    }
    .titulo{
        display: flex;
        flex-direction: row;
        flex-wrap: wrap;
        font-size: 30px;
    }
    .titulo h1{
        margin: 0 !important;
        font-weight: 700;
    }
    .subtext{
        display: flex;
        flex-direction: row;
        align-items: center;
        gap: 10px;
    }
    .signin-link, .unimarket{
        color: #0377FF;
    }
</style>